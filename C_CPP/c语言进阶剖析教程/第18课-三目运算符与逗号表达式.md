# 第18课-三目运算符与逗号表达式

18-1.c

```c
#include<stdio.h>

int main(){

	char c = 0;
	short s = 0;
	int i = 0;
	double d = 0;
	char* pc = NULL;

	printf("%d\n",sizeof(c ? s : i));
	printf("%d\n",sizeof(s ? c : i));	
	printf("%d\n",sizeof(i ? i : d));
	//printf("%d\n",d ? d : pc);	
	
	return 0;
}
```

![%E7%AC%AC18%E8%AF%BE-%E4%B8%89%E7%9B%AE%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E9%80%97%E5%8F%B7%E8%A1%A8%E8%BE%BE%E5%BC%8F%208b57a7875331417597c12ca67162a0a4/Untitled.png](D:\08 git\Notes\notion\all\狄泰软件学院\c语言进阶剖析教程\images\Untitled-1636385625957.png)

1、三目运算符，返回值是数，而不是变量

2、返回类型，取决于后量参数隐式转换

18-3.c

```c
#include<stdio.h>

int main(){

	int n = 0,m = 0;
	
	int arr[3][3]={
		(1,2,3),
		(4,5,6),
		(7,8,9)
	};

	int i = 0;
	while(i<5){
		i++,
		printf("%d\n",i);
	}
	for(n=0;n<3;n++){
		for(m=0;m<3;m++){
			printf("%d\n",arr[n][m]);
		}
	}
	
	return 0;
}
```

![%E7%AC%AC18%E8%AF%BE-%E4%B8%89%E7%9B%AE%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E9%80%97%E5%8F%B7%E8%A1%A8%E8%BE%BE%E5%BC%8F%208b57a7875331417597c12ca67162a0a4/Untitled%201.png](D:\08 git\Notes\notion\all\狄泰软件学院\c语言进阶剖析教程\images\Untitled 1-1636385628127.png)

1、逗号表达式，从左往右，一次计算每个表达式值

2、返回的是最后一个表达式的值

2、          (1,2,3),         3
		(4,5,6),        6
		(7,8,9)         9

18-4.c

```c
#include <stdio.h>
#include <assert.h>

int strlen(const char* s)
{  
    return assert(s), (*s ? strlen(s + 1) + 1 : 0);
}

int main()
{   
    printf("len = %d\n", strlen("Delphi"));
    printf("len = %d\n", strlen(NULL));
    
    return 0;
}
```

![%E7%AC%AC18%E8%AF%BE-%E4%B8%89%E7%9B%AE%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E9%80%97%E5%8F%B7%E8%A1%A8%E8%BE%BE%E5%BC%8F%208b57a7875331417597c12ca67162a0a4/Untitled%202.png](D:\08 git\Notes\notion\all\狄泰软件学院\c语言进阶剖析教程\images\Untitled 2-1636385630261.png)

1、一句话实现strlen

2、assert(s) 打印错误或空指针

3、递归调用使用strlen()
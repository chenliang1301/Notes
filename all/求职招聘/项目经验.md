# 项目经验

# 项目经历

## 项目名称：充电桩功率检测 | 项目工具：Windows

## 项目描述：

## 项目介绍：

           此项目分为两部分：PC端软件和设备端功率检测。

       1、PC端软件

       上位机主要完成的目标是与下位机建立TCP通讯并处理数据。在Android系统的平板电脑，编写客户端程序，建立TCP通讯，使用多线程技术处理UI线程和耗时的数据处理线程。并通过消息队列机制灵活的处理数据。

       TCP协议：调用socket函数编写客户端。

       消息队列：异步提高系统性能，数据在几百毫秒就要采集一次，会使在数据处理进程变得很慢。

使用消息队列后用户请求数据立即返回,再由消息队列消费者进程从消息中取得数据.由于消息队列，处理数据快，性能得到极大提高。

       2、设备端功率检测

       下位机主要完成的目标是测量功率。基于STM32f030c8t6芯片，设计功率采样电路。通过功率采样芯片AD8012，将功率转换为脉冲，定时器查询模式计数。通过SPI协议建立TCP网口通信。

       功率采样电路：AD8012数模转换，将模拟信号转换为数字信号。

       SPI协议：控制四个引脚，时钟引脚来控制每位数据的一致性，片选引脚判断从机是否被选中，输入和输出脚进行数据交换。

       网口通讯：读写寄存器，初始化。网关、子网掩码、MAC地址、IP地址。监听通讯口。
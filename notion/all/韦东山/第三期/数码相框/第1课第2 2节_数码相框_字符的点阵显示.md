# 第1课第2.2节_数码相框_字符的点阵显示

原理

![%E7%AC%AC1%E8%AF%BE%E7%AC%AC2%202%E8%8A%82_%E6%95%B0%E7%A0%81%E7%9B%B8%E6%A1%86_%E5%AD%97%E7%AC%A6%E7%9A%84%E7%82%B9%E9%98%B5%E6%98%BE%E7%A4%BA%20df4ab5a959ea4ec49648c5e50b5faeea/Untitled.png](D:\08 git\notion\all\韦东山\第三期\数码相框\images\Untitled.png)

FrameButter：将SRDAM中数据发送到LCD上

![%E7%AC%AC1%E8%AF%BE%E7%AC%AC2%202%E8%8A%82_%E6%95%B0%E7%A0%81%E7%9B%B8%E6%A1%86_%E5%AD%97%E7%AC%A6%E7%9A%84%E7%82%B9%E9%98%B5%E6%98%BE%E7%A4%BA%20df4ab5a959ea4ec49648c5e50b5faeea/Untitled%201.png](D:\08 git\notion\all\韦东山\第三期\数码相框\images\Untitled 1.png)

0x41：将数组记录。

1、像素

2、xy分辨率

3、

###像素和分辨率的关系
像素是组成图象的最基本单元要素：点
分辨率是指在长和宽的两个方向上各拥有的像素个数。一个像素有多大呢？主要取决于显示器的分辨率，相同面积不同分辨率的显示屏，其像素点大小就不相同。
这些有限的点就叫做像素，每一个长度方向上的像素个数乖每一个宽度方向上的像素个数的形式表示，就叫做图片的分辨率。

而对于4.3寸主屏，若
其分辨率：1280x720像素，则
长和宽3.746X2.108（95.2毫米X53.5毫米），1280/3.746=341，即每英寸长度有341个像素，每一个像素有95.2/1280=0.074毫米大。显而易见这个屏幕比前面那个屏显示的效果好得多了。640X480分辨率的图片在这里的长和宽分别为47.6毫米和35.7毫米。

utral ctrl + H：表示ascil 显示

汉字库的内存

![%E7%AC%AC1%E8%AF%BE%E7%AC%AC2%202%E8%8A%82_%E6%95%B0%E7%A0%81%E7%9B%B8%E6%A1%86_%E5%AD%97%E7%AC%A6%E7%9A%84%E7%82%B9%E9%98%B5%E6%98%BE%E7%A4%BA%20df4ab5a959ea4ec49648c5e50b5faeea/Untitled%202.png](D:\08 git\notion\all\韦东山\第三期\数码相框\images\Untitled 2.png)

mmap分析：

来自：[https://www.cnblogs.com/huxiao-tee/p/4660352.html](https://www.cnblogs.com/huxiao-tee/p/4660352.html)

mmap是一种内存映射文件的方法，即将一个文件或者其它对象映射到进程的地址空间，实现文件磁盘地址和进程虚拟地址空间中一段虚拟地址的一一对映关系。实现这样的映射关系后，进程就可以采用指针的方式读写操作这一段内存，而系统会自动回写脏页面到对应的文件磁盘上，即完成了对文件的操作而不必再调用read,write等系统调用函数。相反，内核空间对这段区域的修改也直接反映用户空间，从而可以实现不同进程间的文件共享。如下图所示：

![%E7%AC%AC1%E8%AF%BE%E7%AC%AC2%202%E8%8A%82_%E6%95%B0%E7%A0%81%E7%9B%B8%E6%A1%86_%E5%AD%97%E7%AC%A6%E7%9A%84%E7%82%B9%E9%98%B5%E6%98%BE%E7%A4%BA%20df4ab5a959ea4ec49648c5e50b5faeea/Untitled%203.png](D:\08 git\notion\all\韦东山\第三期\数码相框\images\Untitled 3.png)

2. 显示文字
2.1 文字编码方式
源文件用不同的编码方式编写，会导致执行结果不一样。
怎么解决？编译程序时，要指定字符集
man gcc , /charset
-finput-charset=charset  表示源文件的编码方式, 默认以UTF-8来解析
-fexec-charset=charset   表示可执行程序里的字时候以什么编码方式来表示，默认是UTF-8

gcc -o a a.c  //

gcc -finput-charset=GBK -fexec-charset=UTF-8 -o utf-8_2 ansi.c

2.2 英文字母、汉字的点阵显示
测试:
1. 配置、修改内核支持把lcd.c编译进去
cp /work/drivers_and_test_new/10th_lcd/lcd.c drivers/video/
修改drivers/video/Makefile
#obj-$(CONFIG_FB_S3C2410)         += s3c2410fb.o
obj-$(CONFIG_FB_S3C2410)          += lcd.o

make menuconfig  配置内核，包含LCD

make uImage

nfs 32000000 192.168.1.123:/work/nfs_root/uImage; bootm 32000000

set bootargs console=ttySAC0,115200 root=/dev/nfs nfsroot=192.168.1.123:/work/nfs_root/fs_mini_mdev_new ip=192.168.1.17     

set bootargs console=ttySAC0,115200 root=/dev/nfs nfsroot=192.168.1.102:/work/nfs_root/fs_mini_mdev_new ,v3, ip=192.168.1.17:192.168.1.102:192.168.1.1:255.255.255.0::eth0:off

nfs 32000000 192.168.1.123:/work/nfs_root/uImage_tq2440; bootm 32000000

nfs 30000000 192.168.1.102:/work/nfs_root/uImage_tq2440; bootm 30000000

nfs 30000000 192.168.1.102:/work/nfs_root/uImage_net_new; bootm 30000000

nfs 30000000 192.168.1.102:/work/nfs_root/uImage_jz2440; bootm 30000000

nfs 32000000 192.168.1.123:/work/nfs_root/uImage_mini2440; bootm 32000000

nfs 32000000 192.168.1.102:/work/nfs_root/uImage_lcd; bootm 32000000

2. 使用新内核启动

2.3 使用freetype来显示任意大小的文字
2.4 编写一个通用的Makefile

mount -t nfs -o nolock,vers=2 192.168.1.102:/work/nfs_root /mnt